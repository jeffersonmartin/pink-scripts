# Network Interface Configuration
# Generated by Labstack

# The loopback network interface
auto lo
iface lo inet loopback

# v1000 OOB Management
auto eth0
iface eth0 inet static
    address 10.100.{ENV_CELL_NUMBER}0.1
    netmask 255.255.0.0
    network 10.100.0.0
    broadcast 10.100.255.255

# v1800 CELL Management
auto eth1
iface eth1 inet static
    address 10.1{ENV_CELL_NUMBER}0.0.1
    netmask 255.255.0.0
    network 10.1{ENV_CELL_NUMBER}0.0.0
    broadcast 10.1{ENV_CELL_NUMBER}0.255.255

    # Add DNS resolution for the labstack.local domain
    dns-nameservers 10.1{ENV_CELL_NUMBER}0.0.1
    dns-search cell{ENV_CELL_NUMBER}.labstack.local

    # Add static routes for each of the racks in the cell to route through each rack's router
    up route add -net 10.1{ENV_CELL_NUMBER}1.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.1
    up route add -net 10.1{ENV_CELL_NUMBER}2.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.2
    up route add -net 10.1{ENV_CELL_NUMBER}3.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.3
    up route add -net 10.1{ENV_CELL_NUMBER}4.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.4
    up route add -net 10.1{ENV_CELL_NUMBER}5.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.5
    up route add -net 10.1{ENV_CELL_NUMBER}6.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.6
    up route add -net 10.1{ENV_CELL_NUMBER}7.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.7
    up route add -net 10.1{ENV_CELL_NUMBER}8.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.8
    up route add -net 10.1{ENV_CELL_NUMBER}9.0.0 netmask 255.255.0.0 gw 10.1{ENV_CELL_NUMBER}0.254.9

# v2000 WEB Access
auto eth2
iface eth2 inet static
    address 10.200.{ENV_CELL_NUMBER}0.1
    netmask 255.255.0.0
    network 10.200.0.0
    broadcast 10.200.255.255
    gateway 10.200.0.1

    # Use public Google and OpenDNS servers
    dns-nameservers 8.8.8.8 208.67.222.222
